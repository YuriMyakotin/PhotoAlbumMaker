function GetFolder(n){var t=Folders.length;for(let i=0;i<t;i++)if(Folders[i].I==n)return Folders[i];return Object()}function MakeNavStr(){var n=CurrentFolderID,t;if(n==0){window.NavStr.innerHTML=SiteData.N;return}for(t=GetFolder(n),window.NavStr.innerHTML=t.N;;){if(n=t.PI,n==0){window.NavStr.innerHTML='<a href="#" onclick="LoadAlbum(0)">'+SiteData.N+"<\/a>&nbsp;>> "+window.NavStr.innerHTML;return}t=GetFolder(n);window.NavStr.innerHTML='<a href="#" onclick="LoadAlbum('+n+')">'+t.N+"<\/a>&nbsp;>> "+window.NavStr.innerHTML}}function LoadAlbum(n){var t,i;CurrentFolderID=n;MakeNavStr();n==0?(document.title=SiteData.N,t=SiteData.D):(i=GetFolder(n),document.title=i.N,t=i.C);window.FolderDesc.innerText=t;window.FolderDesc.style.display=t.length>0?"block":"none";LoadSubfolders()}function LoadSubfolders(){var u,t,f,n,o,i;if(window.VideosLst.outerHTML='<div class="videos-list" id="VideosLst"><\/div>',window.ImgLst.outerHTML='<div class="images-list" id="ImgLst"><\/div>',window.FoldersLst.outerHTML='<div class="folders-list" id="FoldersLst"><\/div>',window.appendContent.outerHTML='<div id="appendContent" style="display: none;"><\/div>',u=CurrentFolderID,t=Folders.length,t>0){window.FoldersLst.style.display="block";for(let n=0;n<t;n++)if(Folders[n].PI==CurrentFolderID){var r=Folders[n],l="/"+r.TF.toString()+"/thumbs/"+r.TN,s=$('<a class="Fol" id="f'+r.I.toString()+'" title="'+r.D+'" href="#" onclick="LoadAlbum('+r.I.toString()+')"><img class="F" src="'+l+'"/><span class="folder-name">'+r.N+"<\/span><\/a>"),h=colour[u%colour.length];u++;s.css({backgroundColor:h,width:SiteData.TS*2,height:SiteData.TS+8});$("#FoldersLst").append(s)}$("#FoldersLst").masonry({itemSelector:".Fol",isFitWidth:!0})}else window.FoldersLst.style.display="none";if(CurrentFolderID!=0){if(f=GetFolder(CurrentFolderID),t=f.V.length,t>0){window.VideosLst.style.display="block";for(let n=0;n<t;n++){var e=f.V[n],c=$('<a class="Vid" data-fancybox="Vid" title="'+e.D+' " href="Videos/'+e.N.toString()+'" data-gallery="gallery1"><img class="V" src="/Content/Video.png" height="'+(SiteData.TS/2).toString()+'" width="'+(SiteData.TS/2).toString()+'" width="'+SiteData.TS.toString()+'"><span class="video-name">'+e.D+"<\/span><\/a>"),h=colour[u%colour.length];u++;c.css({backgroundColor:h,width:SiteData.TS*1.5,height:SiteData.TS/2+4});$("#VideosLst").append(c)}$("#VideosLst").masonry({itemSelector:".Vid",isFitWidth:!0,transitionDuration:0});$('[data-fancybox="Vid"]').fancybox({loop:!0,animationEffect:!1,transitionEffect:!1,protection:!0,buttons:["close"],defaultType:"video",video:{tpl:'<video class="fancybox-video" controls controlsList="nodownload" oncontextmenu="return false;" poster="{{poster}}"><source src="{{src}}" type="{{format}}" /><\/video>"',autoStart:!0}})}else window.VideosLst.style.display="none";if(t=f.Im.length,t>0){for(let r=0;r<t;r++)n=f.Im[r],o=$('<a rel="group" title="'+n.N+'" href="'+CurrentFolderID.toString()+"/slides/"+n.N+'" class="Img" data-fancybox="Img"><img class="I" src="'+CurrentFolderID.toString()+"/thumbs/"+n.N+'" /><\/a>'),o.css({width:SiteData.TS,height:SiteData.TS}),$("#ImgLst").append(o),i="<br/><div>",n.C!=null&&(i+='<span class="cmnt">'+n.C+"<\/span><br />"),i+='<a class="OrigImgLink" href="'+CurrentFolderID.toString()+"/"+n.N+'" target="_blank" title="Original image">'+n.N+"<\/a><br />",i+=n.E+"<br />",i+=n.G!=null?'Geotag: <a href="https://www.google.com/maps/dir//'+n.G+"/@"+n.G+',18z" target="_blank">'+n.G+"<\/a>":"&nbsp;",i+="<br /><\/div>",$("#appendContent").append(i);$("#ImgLst").masonry({itemSelector:".Img",isFitWidth:!0,transitionDuration:0});$('[data-fancybox="Img"]').fancybox({afterShow:function(){var n="<div id='tools'>"+$("#appendContent div").eq(this.index).html()+"<\/div>";$(".fancybox-title").append(n)},caption:function(){return'<div class="fancybox-title"><\/div>'},loop:!0,animationEffect:!1,transitionEffect:!1,protection:!0,image:{preload:!0},buttons:["slideShow","thumbs","close"]})}}}var colour=["#F3B200","#77B900","#AD103C","#2572EB","#632F00","#B01E00","#7200AC","#006AC1","#008287","#56C5FF","#4617B4","#C1004F","#00C13F","#FF981D","#FF2E12","#199900","#FF1D77","#AA40FF","#1FAEFF","#00D8CC","#91D100","#E1B700","#FF76BC","#00A3A3","#FE7C22","#647687"],CurrentFolderID=0,Folders=[],SiteData;$(document).ready(function(){$.getJSON("Site.json",function(n){SiteData=n.valueOf();Folders=SiteData.F;window.sitestats.innerHTML=SiteData.TIC.toString()+" images, "+SiteData.TVC.toString()+" videos, last updated "+SiteData.LC;LoadAlbum(0)})});