function GetFolder(n){var t=Folders.length;for(let i=0;i<t;i++)if(Folders[i].I==n)return Folders[i];return Object()}function MakeNavStr(){var n=CurrentFolderID,t;if(n==0){window.NavStr.innerHTML=SiteData.N;return}for(t=GetFolder(n),window.NavStr.innerHTML=t.N;;){if(n=t.PI,n==0){window.NavStr.innerHTML='<a href="#" onclick="LoadAlbum(0)">'+SiteData.N+"<\/a>&nbsp;>> "+window.NavStr.innerHTML;return}t=GetFolder(n);window.NavStr.innerHTML='<a href="#" onclick="LoadAlbum('+n+')">'+t.N+"<\/a>&nbsp;>> "+window.NavStr.innerHTML}}function LoadAlbum(n){var t,i;CurrentFolderID=n;MakeNavStr();n==0?(document.title=SiteData.N,t=SiteData.D):(i=GetFolder(n),document.title=i.N,t=i.C);window.FolderDesc.innerText=t;window.FolderDesc.style.display=t.length>0?"block":"none";LoadSubfolders();$(document).bind("contextmenu",function(n){n.preventDefault()})}function LoadSubfolders(){var u,t,f,n,o,r;if(window.VideosLst.outerHTML='<div class="videos-list" id="VideosLst"><\/div>',window.ImgLst.outerHTML='<div class="images-list" id="ImgLst"><\/div>',window.FoldersLst.outerHTML='<div class="folders-list" id="FoldersLst"><\/div>',window.appendContent.outerHTML='<div id="appendContent" style="display: none;"><\/div>',u=CurrentFolderID,t=Folders.length,t>0){window.FoldersLst.style.display="block";for(let n=0;n<t;n++)if(Folders[n].PI==CurrentFolderID){var i=Folders[n],l="/"+i.TF.toString()+"/thumbs/"+i.TN,s=$('<a class="Fol" id="f'+i.I.toString()+'" title="'+i.D+'" href="#" onclick="LoadAlbum('+i.I.toString()+')"><img class="F" src="'+l+'"/><span class="folder-name">'+i.N+"<\/span><\/a>"),h=colour[u%colour.length];u++;s.css({backgroundColor:h,width:SiteData.TS*2,height:SiteData.TS+8});$("#FoldersLst").append(s)}$("#FoldersLst").masonry({itemSelector:".Fol",isFitWidth:!0})}else window.FoldersLst.style.display="none";if(CurrentFolderID!=0){if(f=GetFolder(CurrentFolderID),t=f.V.length,t>0){window.VideosLst.style.display="block";for(let n=0;n<t;n++){var e=f.V[n],c=$('<a class="Vid" data-fancybox="Vid" title="'+e.D+' " href="Videos/'+e.N.toString()+'" data-gallery="gallery1"><img class="V" src="/Content/Video.png" height="'+(SiteData.TS/2).toString()+'" width="'+(SiteData.TS/2).toString()+'" width="'+SiteData.TS.toString()+'"><span class="video-name">'+e.D+"<\/span><\/a>"),h=colour[u%colour.length];u++;c.css({backgroundColor:h,width:SiteData.TS*1.5,height:SiteData.TS/2+4});$("#VideosLst").append(c)}$("#VideosLst").masonry({itemSelector:".Vid",isFitWidth:!0,transitionDuration:0});$('[data-fancybox="Vid"]').fancybox({loop:!0,animationEffect:!1,transitionEffect:!1,protection:!0,buttons:["close"],defaultType:"video",video:{tpl:'<video class="fancybox-video" controls controlsList="nodownload" oncontextmenu="return false;" poster="{{poster}}"><source src="{{src}}" type="{{format}}" /><\/video>"',autoStart:!0}})}else window.VideosLst.style.display="none";if(t=f.Im.length,t>0){for(let i=0;i<t;i++)n=f.Im[i],o=$('<a rel="group" title="'+n.N+'" href="'+CurrentFolderID.toString()+"/slides/"+n.N+'" class="Img" data-fancybox="Img"><img class="I" src="'+CurrentFolderID.toString()+"/thumbs/"+n.N+'" /><\/a>'),o.css({width:SiteData.TS,height:SiteData.TS}),$("#ImgLst").append(o),r="<br/><div>",n.C!=null&&(r+='<span class="cmnt">'+n.C+"<\/span><br />"),r+='<a class="OrigImgLink" href="#" title="Original image" onclick="ShowOriginalImage('+CurrentFolderID+",'"+n.N+"');return false;\">"+n.N+"<\/a><br />",r+=ExifInfoToStr(n)+"<br />"+GPSInfoToStr(n),r+="<br /><\/div>",$("#appendContent").append(r);$("#ImgLst").masonry({itemSelector:".Img",isFitWidth:!0,transitionDuration:0});$('[data-fancybox="Img"]').fancybox({afterShow:function(){var n="<div id='tools'>"+$("#appendContent div").eq(this.index).html()+"<\/div>";$(".fancybox-title").append(n)},onActivate:function(){var n="<div id='tools'>"+$("#appendContent div").eq(this.index).html()+"<\/div>";$(".fancybox-title").append(n)},caption:function(){return'<div class="fancybox-title"><\/div>'},loop:!0,animationEffect:!1,transitionEffect:!1,protect:!0,image:{preload:!0},buttons:["slideShow","thumbs","close"]})}}}function ShowOriginalImage(n,t){$.fancybox.open({src:"/"+n.toString()+"/"+t,type:"image",buttons:["zoom","close"],opts:{closeExisting:!1,preload:!1,buttons:["zoom","close"],protect:!0,animationEffect:!1,afterShow:function(){$(".fancybox-button--zoom").click()}}})}function ConvertDEGToDMS(n,t){var i=parseFloat(n),r=Math.abs(i),u=Math.floor(r),f=(r-u)*60,e=Math.floor(f),s=((f-e)*60).toFixed(2),o;return o=t?i>=0?"N":"S":i>=0?"E":"W",u+"Â°"+e+"'"+s+'"'+o}function ExifInfoToStr(n){var t="";return n.D!=null&&(t+=n.D+"&nbsp; "),n.Cn!=null&&(t+=n.Cn+"&nbsp; "),n.F!=null&&(t+=n.F+"mm&nbsp; "),n.I!=null&&(t+="ISO:"+n.I+"&nbsp; "),n.E!=null&&(t+=n.E+"s&nbsp; "),n.A!=null&&(t+="f/"+n.A+"&nbsp; "),t}function GPSInfoToStr(n){var r="",t,i;return n.La!=null&&n.Lo!=null&&(t=n.La+","+n.Lo,i=ConvertDEGToDMS(n.La,!0)+",&nbsp;"+ConvertDEGToDMS(n.Lo,!1),n.Al!=null&&(i+=",&nbsp"+n.Al),r='<a href="https://www.google.com/maps/dir//'+t+"/@"+t+',18z" target="_blank">'+i+"<\/a>"),r}var colour=["#F3B200","#77B900","#AD103C","#2572EB","#632F00","#B01E00","#7200AC","#006AC1","#008287","#56C5FF","#4617B4","#C1004F","#00C13F","#FF981D","#FF2E12","#199900","#FF1D77","#AA40FF","#1FAEFF","#00D8CC","#91D100","#E1B700","#FF76BC","#00A3A3","#FE7C22","#647687"],CurrentFolderID=0,Folders=[],SiteData;$(document).ready(function(){$.getJSON("Site.json",function(n){SiteData=n.valueOf();Folders=SiteData.F;window.sitestats.innerHTML=SiteData.TIC.toString()+" images, "+SiteData.TVC.toString()+" videos, last updated "+SiteData.LC;LoadAlbum(0)})});